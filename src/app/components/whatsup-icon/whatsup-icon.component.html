<!-- Chatbot Buttons (hide when form opens) -->
<div class="chatbot-container" *ngIf="!showConsultation">
  <div 
    class="chatbot-options" 
    [class.open]="isOpen"
  >
    <button 
      (click)="toggleConsultation()"
      class="option-btn">
      <span>Book a free consultation</span>
      <i class="icon">ğŸ“</i>
    </button>

    <button class="option-btn" routerLink="/contact-us">
      <span>Contact Us</span>
      <i class="icon">ğŸ”—</i>
    </button>
  </div>

  <button 
    class="chatbot-main-btn" 
    (click)="toggleChatbot()"
  >
    <!-- Show SVG when closed -->
    <img 
      *ngIf="!isOpen"
      src="https://accric.com/wp-content/plugins/bit-assist/img/widget/widgetIcon3.svg"
      alt="Chat Icon"
      class="chat-icon"
    />

    <!-- Show X when open -->
    <span *ngIf="isOpen" class="close-icon">âœ–</span>
  </button>
</div>

<div
  *ngIf="showConsultation"
  class="fixed bottom-24 right-6 w-[360px] bg-white rounded-xl shadow-xl border z-[999999]
         pointer-events-auto"
  style="overflow: visible !important; position: fixed !important;">
  
  <!-- Header -->
  <div class="bg-[#4e8df5] text-white px-4 py-3 flex justify-between items-center rounded-t-xl">
    <h3 class="font-semibold">Book a free consultation</h3>

    <button (click)="toggleConsultation()" class="text-white text-lg">
      âœ•
    </button>
  </div>

  <!-- Form Body -->
  
<form class="p-5 space-y-3" (ngSubmit)="submitForm()" [formGroup]="consultationForm">

  <!-- Name -->
  <div>
    <input formControlName="name" type="text" placeholder="Name"
      class="w-full border rounded-lg p-2" />
    <p *ngIf="consultationForm.get('name')?.touched && consultationForm.get('name')?.invalid"
      class="text-red-600 text-sm mt-1">
      Name is required
    </p>
  </div>

  <!-- Email -->
  <div>
    <input formControlName="email" type="email" placeholder="Email"
      class="w-full border rounded-lg p-2" />
    <p *ngIf="consultationForm.get('email')?.touched && consultationForm.get('email')?.invalid"
      class="text-red-600 text-sm mt-1">
      Enter a valid email address
    </p>
  </div>

  <!-- Number -->
  <div>
    <input formControlName="number" type="text" placeholder="Number"
      class="w-full border rounded-lg p-2" />
    <p *ngIf="consultationForm.get('number')?.touched && consultationForm.get('number')?.invalid"
      class="text-red-600 text-sm mt-1">
      Enter a valid 10-digit number
    </p>
  </div>

  <!-- Company -->
  <div>
    <input formControlName="company" type="text" placeholder="Company Name"
      class="w-full border rounded-lg p-2" />
    <p *ngIf="consultationForm.get('company')?.touched && consultationForm.get('company')?.invalid"
      class="text-red-600 text-sm mt-1">
      Company name is required
    </p>
  </div>

  <!-- Subject -->
  <div>
    <input formControlName="subject" type="text" placeholder="Subject"
      class="w-full border rounded-lg p-2" />
    <p *ngIf="consultationForm.get('subject')?.touched && consultationForm.get('subject')?.invalid"
      class="text-red-600 text-sm mt-1">
      Subject is required
    </p>
  </div>

  <!-- Message -->
  <div>
    <textarea formControlName="message" placeholder="Textarea"
      class="w-full border rounded-lg p-2 h-24"></textarea>
    <p *ngIf="consultationForm.get('message')?.touched && consultationForm.get('message')?.invalid"
      class="text-red-600 text-sm mt-1">
      Message must be at least 5 characters
    </p>
  </div>

  <!-- Submit Button -->
  <button type="submit"
    [disabled]="consultationForm.invalid"
    class="w-full bg-[#4e8df5] text-white py-2 rounded-lg font-semibold 
           disabled:bg-gray-400 disabled:cursor-not-allowed">
    Submit
  </button>

</form>


 
</div>
